{"ast":null,"code":"export const waves = () => {\n  class ShaderProgram {\n    constructor(holder, options = {}) {\n      options = Object.assign({\n        antialias: false,\n        depthTest: false,\n        mousemove: false,\n        autosize: true,\n        side: \"front\",\n        vertex: `\n                  precision highp float;\n          \n                  attribute vec4 a_position;\n                  attribute vec4 a_color;\n          \n                  uniform float u_time;\n                  uniform vec2 u_resolution;\n                  uniform vec2 u_mousemove;\n                  uniform mat4 u_projection;\n          \n                  varying vec4 v_color;\n          \n                  void main() {\n          \n                    gl_Position = u_projection * a_position;\n                    gl_PointSize = (10.0 / gl_Position.w) * 100.0;\n          \n                    v_color = a_color;\n          \n                  }`,\n        fragment: `\n                  precision highp float;\n          \n                  uniform sampler2D u_texture;\n                  uniform int u_hasTexture;\n          \n                  varying vec4 v_color;\n          \n                  void main() {\n          \n                    if ( u_hasTexture == 1 ) {\n          \n                      gl_FragColor = v_color * texture2D(u_texture, gl_PointCoord);\n          \n                    } else {\n          \n                      gl_FragColor = v_color;\n          \n                    }\n          \n                  }`,\n        uniforms: {},\n        buffers: {},\n        camera: {},\n        texture: null,\n        onUpdate: () => {},\n        onResize: () => {}\n      }, options);\n      const uniforms = Object.assign({\n        time: {\n          type: \"float\",\n          value: 0\n        },\n        hasTexture: {\n          type: \"int\",\n          value: 0\n        },\n        resolution: {\n          type: \"vec2\",\n          value: [0, 0]\n        },\n        mousemove: {\n          type: \"vec2\",\n          value: [0, 0]\n        },\n        projection: {\n          type: \"mat4\",\n          value: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]\n        }\n      }, options.uniforms);\n      const buffers = Object.assign({\n        position: {\n          size: 3,\n          data: []\n        },\n        color: {\n          size: 4,\n          data: []\n        }\n      }, options.buffers);\n      const camera = Object.assign({\n        fov: 60,\n        near: 1,\n        far: 10000,\n        aspect: 1,\n        z: 100,\n        perspective: true\n      }, options.camera);\n      const canvas = document.createElement(\"canvas\");\n      const gl = canvas.getContext(\"webgl\", {\n        antialias: options.antialias\n      });\n      if (!gl) return false;\n      this.count = 0;\n      this.gl = gl;\n      this.canvas = canvas;\n      this.camera = camera;\n      this.holder = holder;\n      this.onUpdate = options.onUpdate;\n      this.onResize = options.onResize;\n      this.data = {};\n      holder.appendChild(canvas);\n      this.createProgram(options.vertex, options.fragment);\n      this.createBuffers(buffers);\n      this.createUniforms(uniforms);\n      this.updateBuffers();\n      this.updateUniforms();\n      this.createTexture(options.texture);\n      gl.enable(gl.BLEND);\n      gl.enable(gl.CULL_FACE);\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n      gl[options.depthTest ? \"enable\" : \"disable\"](gl.DEPTH_TEST);\n      if (options.autosize) window.addEventListener(\"resize\", e => this.resize(e), false);\n      if (options.mousemove) window.addEventListener(\"mousemove\", e => this.mousemove(e), false);\n      this.resize();\n      this.update = this.update.bind(this);\n      this.time = {\n        start: performance.now(),\n        old: performance.now()\n      };\n      this.update();\n    }\n    mousemove(e) {\n      let x = e.pageX / this.width * 2 - 1;\n      let y = e.pageY / this.height * 2 - 1;\n      this.uniforms.mousemove = [x, y];\n    }\n    resize(e) {\n      const holder = this.holder;\n      const canvas = this.canvas;\n      const gl = this.gl;\n      const width = this.width = holder.offsetWidth;\n      const height = this.height = holder.offsetHeight;\n      const aspect = this.aspect = width / height;\n      const dpi = devicePixelRatio;\n      canvas.width = width * dpi;\n      canvas.height = height * dpi;\n      canvas.style.width = width + \"px\";\n      canvas.style.height = height + \"px\";\n      gl.viewport(0, 0, width * dpi, height * dpi);\n      gl.clearColor(0, 0, 0, 0);\n      this.uniforms.resolution = [width, height];\n      this.uniforms.projection = this.setProjection(aspect);\n      this.onResize(width, height, dpi);\n    }\n    setProjection(aspect) {\n      const camera = this.camera;\n      if (camera.perspective) {\n        camera.aspect = aspect;\n        const fovRad = camera.fov * (Math.PI / 180);\n        const f = Math.tan(Math.PI * 0.5 - 0.5 * fovRad);\n        const rangeInv = 1.0 / (camera.near - camera.far);\n        const matrix = [f / camera.aspect, 0, 0, 0, 0, f, 0, 0, 0, 0, (camera.near + camera.far) * rangeInv, -1, 0, 0, camera.near * camera.far * rangeInv * 2, 0];\n        matrix[14] += camera.z;\n        matrix[15] += camera.z;\n        return matrix;\n      } else {\n        return [2 / this.width, 0, 0, 0, 0, -2 / this.height, 0, 0, 0, 0, 1, 0, -1, 1, 0, 1];\n      }\n    }\n    createShader(type, source) {\n      const gl = this.gl;\n      const shader = gl.createShader(type);\n      gl.shaderSource(shader, source);\n      gl.compileShader(shader);\n      if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        return shader;\n      } else {\n        console.log(gl.getShaderInfoLog(shader));\n        gl.deleteShader(shader);\n      }\n    }\n    createProgram(vertex, fragment) {\n      const gl = this.gl;\n      const vertexShader = this.createShader(gl.VERTEX_SHADER, vertex);\n      const fragmentShader = this.createShader(gl.FRAGMENT_SHADER, fragment);\n      const program = gl.createProgram();\n      gl.attachShader(program, vertexShader);\n      gl.attachShader(program, fragmentShader);\n      gl.linkProgram(program);\n      if (gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        gl.useProgram(program);\n        this.program = program;\n      } else {\n        console.log(gl.getProgramInfoLog(program));\n        gl.deleteProgram(program);\n      }\n    }\n    createUniforms(data) {\n      const gl = this.gl;\n      const uniforms = this.data.uniforms = data;\n      const values = this.uniforms = {};\n      Object.keys(uniforms).forEach(name => {\n        const uniform = uniforms[name];\n        uniform.location = gl.getUniformLocation(this.program, \"u_\" + name);\n        Object.defineProperty(values, name, {\n          set: value => {\n            uniforms[name].value = value;\n            this.setUniform(name, value);\n          },\n          get: () => uniforms[name].value\n        });\n      });\n    }\n    setUniform(name, value) {\n      const gl = this.gl;\n      const uniform = this.data.uniforms[name];\n      uniform.value = value;\n      switch (uniform.type) {\n        case \"int\":\n          {\n            gl.uniform1i(uniform.location, value);\n            break;\n          }\n        case \"float\":\n          {\n            gl.uniform1f(uniform.location, value);\n            break;\n          }\n        case \"vec2\":\n          {\n            gl.uniform2f(uniform.location, ...value);\n            break;\n          }\n        case \"vec3\":\n          {\n            gl.uniform3f(uniform.location, ...value);\n            break;\n          }\n        case \"vec4\":\n          {\n            gl.uniform4f(uniform.location, ...value);\n            break;\n          }\n        case \"mat2\":\n          {\n            gl.uniformMatrix2fv(uniform.location, false, value);\n            break;\n          }\n        case \"mat3\":\n          {\n            gl.uniformMatrix3fv(uniform.location, false, value);\n            break;\n          }\n        case \"mat4\":\n          {\n            gl.uniformMatrix4fv(uniform.location, false, value);\n            break;\n          }\n      }\n\n      // ivec2       : uniform2i,\n      // ivec3       : uniform3i,\n      // ivec4       : uniform4i,\n      // sampler2D   : uniform1i,\n      // samplerCube : uniform1i,\n      // bool        : uniform1i,\n      // bvec2       : uniform2i,\n      // bvec3       : uniform3i,\n      // bvec4       : uniform4i,\n    }\n    updateUniforms() {\n      const gl = this.gl;\n      const uniforms = this.data.uniforms;\n      Object.keys(uniforms).forEach(name => {\n        const uniform = uniforms[name];\n        this.uniforms[name] = uniform.value;\n      });\n    }\n    createBuffers(data) {\n      const gl = this.gl;\n      const buffers = this.data.buffers = data;\n      const values = this.buffers = {};\n      Object.keys(buffers).forEach(name => {\n        const buffer = buffers[name];\n        buffer.buffer = this.createBuffer(\"a_\" + name, buffer.size);\n        Object.defineProperty(values, name, {\n          set: data => {\n            buffers[name].data = data;\n            this.setBuffer(name, data);\n            if (name == \"position\") this.count = buffers.position.data.length / 3;\n          },\n          get: () => buffers[name].data\n        });\n      });\n    }\n    createBuffer(name, size) {\n      const gl = this.gl;\n      const program = this.program;\n      const index = gl.getAttribLocation(program, name);\n      const buffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n      gl.enableVertexAttribArray(index);\n      gl.vertexAttribPointer(index, size, gl.FLOAT, false, 0, 0);\n      return buffer;\n    }\n    setBuffer(name, data) {\n      const gl = this.gl;\n      const buffers = this.data.buffers;\n      if (name == null && !gl.bindBuffer(gl.ARRAY_BUFFER, null)) return;\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers[name].buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\n    }\n    updateBuffers() {\n      const gl = this.gl;\n      const buffers = this.buffers;\n      Object.keys(buffers).forEach(name => buffers[name] = buffer.data);\n      this.setBuffer(null);\n    }\n    createTexture(src) {\n      const gl = this.gl;\n      const texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([0, 0, 0, 0]));\n      this.texture = texture;\n      if (src) {\n        this.uniforms.hasTexture = 1;\n        this.loadTexture(src);\n      }\n    }\n    loadTexture(src) {\n      const gl = this.gl;\n      const texture = this.texture;\n      const textureImage = new Image();\n      textureImage.onload = () => {\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureImage);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      };\n      textureImage.src = src;\n    }\n    update() {\n      const gl = this.gl;\n      const now = performance.now();\n      const elapsed = (now - this.time.start) / 5000;\n      const delta = now - this.time.old;\n      this.time.old = now;\n      this.uniforms.time = elapsed;\n      if (this.count > 0) {\n        gl.clear(gl.COLORBUFFERBIT);\n        gl.drawArrays(gl.POINTS, 0, this.count);\n      }\n      this.onUpdate(delta);\n      requestAnimationFrame(this.update);\n    }\n  }\n  const pointSize = 2.5;\n  const waves = new ShaderProgram(document.querySelector(\".waves\"), {\n    texture: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAb1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8v0wLRAAAAJHRSTlMAC/goGvDhmwcExrVjWzrm29TRqqSKenRXVklANSIUE8mRkGpv+HOfAAABCElEQVQ4y4VT13LDMAwLrUHteO+R9f/fWMfO6dLaPeKVEECRxOULWsEGpS9nULDwia2Y+ALqUNbAWeg775zv+sA4/FFRMxt8U2FZFCVWjR/YrH4/H9sarclSKdPMWKzb8VsEeHB3m0shkhVCyNzeXeAQ9Xl4opEieX2QCGnwGbj6GMyjw9t1K0fK9YZunPXeAGsfJtYjwzxaBnozGGorYz0ypK2HzQSYx1y8DgSRo2ewOiyh2QWOEk1Y9OrQV0a8TiBM1a8eMHWYnRMy7CZ4t1CmyRkhSUvP3gRXyHOCLBxNoC3IJv//ZrJ/kxxUHPUB+6jJZZHrpg6GOjnqaOmzp4NDR48OLxn/H27SRQ08S0ZJAAAAAElFTkSuQmCC\",\n    uniforms: {\n      size: {\n        type: \"float\",\n        value: pointSize\n      },\n      field: {\n        type: \"vec3\",\n        value: [0, 0, 0]\n      },\n      speed: {\n        type: \"float\",\n        value: 5\n      }\n    },\n    vertex: `\n              #define M_PI 3.1415926535897932384626433832795\n          \n              precision highp float;\n          \n              attribute vec4 a_position;\n              attribute vec4 a_color;\n          \n              uniform float u_time;\n              uniform float u_size;\n              uniform float u_speed;\n              uniform vec3 u_field;\n              uniform mat4 u_projection;\n          \n              varying vec4 v_color;\n          \n              void main() {\n          \n                vec3 pos = a_position.xyz;\n          \n                pos.y += (\n                  cos(pos.x / u_field.x * M_PI * 8.0 + u_time * u_speed) +\n                  sin(pos.z / u_field.z * M_PI * 8.0 + u_time * u_speed)\n                ) * u_field.y;\n          \n                gl_Position = u_projection * vec4( pos.xyz, a_position.w );\n                gl_PointSize = ( u_size / gl_Position.w ) * 100.0;\n          \n                v_color = a_color;\n          \n              }`,\n    fragment: `\n              precision highp float;\n          \n              uniform sampler2D u_texture;\n          \n              varying vec4 v_color;\n          \n              void main() {\n          \n                gl_FragColor = v_color * texture2D(u_texture, gl_PointCoord);\n          \n              }`,\n    onResize(w, h, dpi) {\n      const position = [],\n        color = [];\n      const width = 400 * (w / h);\n      const depth = 400;\n      const height = 3;\n      const distance = 5;\n      for (let x = 0; x < width; x += distance) {\n        for (let z = 0; z < depth; z += distance) {\n          position.push(-width / 2 + x, -30, -depth / 2 + z);\n          color.push(0, 1 - x / width * 1, 0.5 + x / width * 0.5, z / depth);\n        }\n      }\n      this.uniforms.field = [width, height, depth];\n      this.buffers.position = position;\n      this.buffers.color = color;\n      this.uniforms.size = h / 400 * pointSize * dpi;\n    }\n  });\n};","map":{"version":3,"names":["waves","ShaderProgram","constructor","holder","options","Object","assign","antialias","depthTest","mousemove","autosize","side","vertex","fragment","uniforms","buffers","camera","texture","onUpdate","onResize","time","type","value","hasTexture","resolution","projection","position","size","data","color","fov","near","far","aspect","z","perspective","canvas","document","createElement","gl","getContext","count","appendChild","createProgram","createBuffers","createUniforms","updateBuffers","updateUniforms","createTexture","enable","BLEND","CULL_FACE","blendFunc","SRC_ALPHA","ONE","DEPTH_TEST","window","addEventListener","e","resize","update","bind","start","performance","now","old","x","pageX","width","y","pageY","height","offsetWidth","offsetHeight","dpi","devicePixelRatio","style","viewport","clearColor","setProjection","fovRad","Math","PI","f","tan","rangeInv","matrix","createShader","source","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","log","getShaderInfoLog","deleteShader","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","useProgram","getProgramInfoLog","deleteProgram","values","keys","forEach","name","uniform","location","getUniformLocation","defineProperty","set","setUniform","get","uniform1i","uniform1f","uniform2f","uniform3f","uniform4f","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","buffer","createBuffer","setBuffer","length","index","getAttribLocation","bindBuffer","ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","FLOAT","bufferData","Float32Array","STATIC_DRAW","src","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","Uint8Array","loadTexture","textureImage","Image","onload","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","elapsed","delta","clear","COLORBUFFERBIT","drawArrays","POINTS","requestAnimationFrame","pointSize","querySelector","field","speed","w","h","depth","distance","push"],"sources":["C:/mickaportifolio/edrea/src/waves.js"],"sourcesContent":["export const waves = () => {\r\n  class ShaderProgram {\r\n    constructor(holder, options = {}) {\r\n      options = Object.assign(\r\n        {\r\n          antialias: false,\r\n          depthTest: false,\r\n          mousemove: false,\r\n          autosize: true,\r\n          side: \"front\",\r\n          vertex: `\r\n                  precision highp float;\r\n          \r\n                  attribute vec4 a_position;\r\n                  attribute vec4 a_color;\r\n          \r\n                  uniform float u_time;\r\n                  uniform vec2 u_resolution;\r\n                  uniform vec2 u_mousemove;\r\n                  uniform mat4 u_projection;\r\n          \r\n                  varying vec4 v_color;\r\n          \r\n                  void main() {\r\n          \r\n                    gl_Position = u_projection * a_position;\r\n                    gl_PointSize = (10.0 / gl_Position.w) * 100.0;\r\n          \r\n                    v_color = a_color;\r\n          \r\n                  }`,\r\n          fragment: `\r\n                  precision highp float;\r\n          \r\n                  uniform sampler2D u_texture;\r\n                  uniform int u_hasTexture;\r\n          \r\n                  varying vec4 v_color;\r\n          \r\n                  void main() {\r\n          \r\n                    if ( u_hasTexture == 1 ) {\r\n          \r\n                      gl_FragColor = v_color * texture2D(u_texture, gl_PointCoord);\r\n          \r\n                    } else {\r\n          \r\n                      gl_FragColor = v_color;\r\n          \r\n                    }\r\n          \r\n                  }`,\r\n          uniforms: {},\r\n          buffers: {},\r\n          camera: {},\r\n          texture: null,\r\n          onUpdate: () => {},\r\n          onResize: () => {},\r\n        },\r\n        options\r\n      );\r\n\r\n      const uniforms = Object.assign(\r\n        {\r\n          time: { type: \"float\", value: 0 },\r\n          hasTexture: { type: \"int\", value: 0 },\r\n          resolution: { type: \"vec2\", value: [0, 0] },\r\n          mousemove: { type: \"vec2\", value: [0, 0] },\r\n          projection: {\r\n            type: \"mat4\",\r\n            value: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\r\n          },\r\n        },\r\n        options.uniforms\r\n      );\r\n\r\n      const buffers = Object.assign(\r\n        {\r\n          position: { size: 3, data: [] },\r\n          color: { size: 4, data: [] },\r\n        },\r\n        options.buffers\r\n      );\r\n\r\n      const camera = Object.assign(\r\n        {\r\n          fov: 60,\r\n          near: 1,\r\n          far: 10000,\r\n          aspect: 1,\r\n          z: 100,\r\n          perspective: true,\r\n        },\r\n        options.camera\r\n      );\r\n\r\n      const canvas = document.createElement(\"canvas\");\r\n      const gl = canvas.getContext(\"webgl\", { antialias: options.antialias });\r\n\r\n      if (!gl) return false;\r\n\r\n      this.count = 0;\r\n      this.gl = gl;\r\n      this.canvas = canvas;\r\n      this.camera = camera;\r\n      this.holder = holder;\r\n      this.onUpdate = options.onUpdate;\r\n      this.onResize = options.onResize;\r\n      this.data = {};\r\n\r\n      holder.appendChild(canvas);\r\n\r\n      this.createProgram(options.vertex, options.fragment);\r\n\r\n      this.createBuffers(buffers);\r\n      this.createUniforms(uniforms);\r\n\r\n      this.updateBuffers();\r\n      this.updateUniforms();\r\n\r\n      this.createTexture(options.texture);\r\n\r\n      gl.enable(gl.BLEND);\r\n      gl.enable(gl.CULL_FACE);\r\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\r\n      gl[options.depthTest ? \"enable\" : \"disable\"](gl.DEPTH_TEST);\r\n\r\n      if (options.autosize)\r\n        window.addEventListener(\"resize\", (e) => this.resize(e), false);\r\n      if (options.mousemove)\r\n        window.addEventListener(\"mousemove\", (e) => this.mousemove(e), false);\r\n\r\n      this.resize();\r\n\r\n      this.update = this.update.bind(this);\r\n      this.time = { start: performance.now(), old: performance.now() };\r\n      this.update();\r\n    }\r\n\r\n    mousemove(e) {\r\n      let x = (e.pageX / this.width) * 2 - 1;\r\n      let y = (e.pageY / this.height) * 2 - 1;\r\n\r\n      this.uniforms.mousemove = [x, y];\r\n    }\r\n\r\n    resize(e) {\r\n      const holder = this.holder;\r\n      const canvas = this.canvas;\r\n      const gl = this.gl;\r\n\r\n      const width = (this.width = holder.offsetWidth);\r\n      const height = (this.height = holder.offsetHeight);\r\n      const aspect = (this.aspect = width / height);\r\n      const dpi = devicePixelRatio;\r\n\r\n      canvas.width = width * dpi;\r\n      canvas.height = height * dpi;\r\n      canvas.style.width = width + \"px\";\r\n      canvas.style.height = height + \"px\";\r\n\r\n      gl.viewport(0, 0, width * dpi, height * dpi);\r\n      gl.clearColor(0, 0, 0, 0);\r\n\r\n      this.uniforms.resolution = [width, height];\r\n      this.uniforms.projection = this.setProjection(aspect);\r\n\r\n      this.onResize(width, height, dpi);\r\n    }\r\n\r\n    setProjection(aspect) {\r\n      const camera = this.camera;\r\n\r\n      if (camera.perspective) {\r\n        camera.aspect = aspect;\r\n\r\n        const fovRad = camera.fov * (Math.PI / 180);\r\n        const f = Math.tan(Math.PI * 0.5 - 0.5 * fovRad);\r\n        const rangeInv = 1.0 / (camera.near - camera.far);\r\n\r\n        const matrix = [\r\n          f / camera.aspect,\r\n          0,\r\n          0,\r\n          0,\r\n          0,\r\n          f,\r\n          0,\r\n          0,\r\n          0,\r\n          0,\r\n          (camera.near + camera.far) * rangeInv,\r\n          -1,\r\n          0,\r\n          0,\r\n          camera.near * camera.far * rangeInv * 2,\r\n          0,\r\n        ];\r\n\r\n        matrix[14] += camera.z;\r\n        matrix[15] += camera.z;\r\n\r\n        return matrix;\r\n      } else {\r\n        return [\r\n          2 / this.width,\r\n          0,\r\n          0,\r\n          0,\r\n          0,\r\n          -2 / this.height,\r\n          0,\r\n          0,\r\n          0,\r\n          0,\r\n          1,\r\n          0,\r\n          -1,\r\n          1,\r\n          0,\r\n          1,\r\n        ];\r\n      }\r\n    }\r\n\r\n    createShader(type, source) {\r\n      const gl = this.gl;\r\n      const shader = gl.createShader(type);\r\n\r\n      gl.shaderSource(shader, source);\r\n      gl.compileShader(shader);\r\n\r\n      if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n        return shader;\r\n      } else {\r\n        console.log(gl.getShaderInfoLog(shader));\r\n        gl.deleteShader(shader);\r\n      }\r\n    }\r\n\r\n    createProgram(vertex, fragment) {\r\n      const gl = this.gl;\r\n\r\n      const vertexShader = this.createShader(gl.VERTEX_SHADER, vertex);\r\n      const fragmentShader = this.createShader(gl.FRAGMENT_SHADER, fragment);\r\n\r\n      const program = gl.createProgram();\r\n\r\n      gl.attachShader(program, vertexShader);\r\n      gl.attachShader(program, fragmentShader);\r\n      gl.linkProgram(program);\r\n\r\n      if (gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n        gl.useProgram(program);\r\n        this.program = program;\r\n      } else {\r\n        console.log(gl.getProgramInfoLog(program));\r\n        gl.deleteProgram(program);\r\n      }\r\n    }\r\n\r\n    createUniforms(data) {\r\n      const gl = this.gl;\r\n      const uniforms = (this.data.uniforms = data);\r\n      const values = (this.uniforms = {});\r\n\r\n      Object.keys(uniforms).forEach((name) => {\r\n        const uniform = uniforms[name];\r\n\r\n        uniform.location = gl.getUniformLocation(this.program, \"u_\" + name);\r\n\r\n        Object.defineProperty(values, name, {\r\n          set: (value) => {\r\n            uniforms[name].value = value;\r\n            this.setUniform(name, value);\r\n          },\r\n          get: () => uniforms[name].value,\r\n        });\r\n      });\r\n    }\r\n\r\n    setUniform(name, value) {\r\n      const gl = this.gl;\r\n      const uniform = this.data.uniforms[name];\r\n\r\n      uniform.value = value;\r\n\r\n      switch (uniform.type) {\r\n        case \"int\": {\r\n          gl.uniform1i(uniform.location, value);\r\n          break;\r\n        }\r\n        case \"float\": {\r\n          gl.uniform1f(uniform.location, value);\r\n          break;\r\n        }\r\n        case \"vec2\": {\r\n          gl.uniform2f(uniform.location, ...value);\r\n          break;\r\n        }\r\n        case \"vec3\": {\r\n          gl.uniform3f(uniform.location, ...value);\r\n          break;\r\n        }\r\n        case \"vec4\": {\r\n          gl.uniform4f(uniform.location, ...value);\r\n          break;\r\n        }\r\n        case \"mat2\": {\r\n          gl.uniformMatrix2fv(uniform.location, false, value);\r\n          break;\r\n        }\r\n        case \"mat3\": {\r\n          gl.uniformMatrix3fv(uniform.location, false, value);\r\n          break;\r\n        }\r\n        case \"mat4\": {\r\n          gl.uniformMatrix4fv(uniform.location, false, value);\r\n          break;\r\n        }\r\n      }\r\n\r\n      // ivec2       : uniform2i,\r\n      // ivec3       : uniform3i,\r\n      // ivec4       : uniform4i,\r\n      // sampler2D   : uniform1i,\r\n      // samplerCube : uniform1i,\r\n      // bool        : uniform1i,\r\n      // bvec2       : uniform2i,\r\n      // bvec3       : uniform3i,\r\n      // bvec4       : uniform4i,\r\n    }\r\n\r\n    updateUniforms() {\r\n      const gl = this.gl;\r\n      const uniforms = this.data.uniforms;\r\n\r\n      Object.keys(uniforms).forEach((name) => {\r\n        const uniform = uniforms[name];\r\n\r\n        this.uniforms[name] = uniform.value;\r\n      });\r\n    }\r\n\r\n    createBuffers(data) {\r\n      const gl = this.gl;\r\n      const buffers = (this.data.buffers = data);\r\n      const values = (this.buffers = {});\r\n\r\n      Object.keys(buffers).forEach((name) => {\r\n        const buffer = buffers[name];\r\n\r\n        buffer.buffer = this.createBuffer(\"a_\" + name, buffer.size);\r\n\r\n        Object.defineProperty(values, name, {\r\n          set: (data) => {\r\n            buffers[name].data = data;\r\n            this.setBuffer(name, data);\r\n\r\n            if (name == \"position\")\r\n              this.count = buffers.position.data.length / 3;\r\n          },\r\n          get: () => buffers[name].data,\r\n        });\r\n      });\r\n    }\r\n\r\n    createBuffer(name, size) {\r\n      const gl = this.gl;\r\n      const program = this.program;\r\n\r\n      const index = gl.getAttribLocation(program, name);\r\n      const buffer = gl.createBuffer();\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n      gl.enableVertexAttribArray(index);\r\n      gl.vertexAttribPointer(index, size, gl.FLOAT, false, 0, 0);\r\n\r\n      return buffer;\r\n    }\r\n\r\n    setBuffer(name, data) {\r\n      const gl = this.gl;\r\n      const buffers = this.data.buffers;\r\n\r\n      if (name == null && !gl.bindBuffer(gl.ARRAY_BUFFER, null)) return;\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers[name].buffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\r\n    }\r\n\r\n    updateBuffers() {\r\n      const gl = this.gl;\r\n      const buffers = this.buffers;\r\n\r\n      Object.keys(buffers).forEach((name) => (buffers[name] = buffer.data));\r\n\r\n      this.setBuffer(null);\r\n    }\r\n\r\n    createTexture(src) {\r\n      const gl = this.gl;\r\n      const texture = gl.createTexture();\r\n\r\n      gl.bindTexture(gl.TEXTURE_2D, texture);\r\n      gl.texImage2D(\r\n        gl.TEXTURE_2D,\r\n        0,\r\n        gl.RGBA,\r\n        1,\r\n        1,\r\n        0,\r\n        gl.RGBA,\r\n        gl.UNSIGNED_BYTE,\r\n        new Uint8Array([0, 0, 0, 0])\r\n      );\r\n\r\n      this.texture = texture;\r\n\r\n      if (src) {\r\n        this.uniforms.hasTexture = 1;\r\n        this.loadTexture(src);\r\n      }\r\n    }\r\n\r\n    loadTexture(src) {\r\n      const gl = this.gl;\r\n      const texture = this.texture;\r\n\r\n      const textureImage = new Image();\r\n\r\n      textureImage.onload = () => {\r\n        gl.bindTexture(gl.TEXTURE_2D, texture);\r\n\r\n        gl.texImage2D(\r\n          gl.TEXTURE_2D,\r\n          0,\r\n          gl.RGBA,\r\n          gl.RGBA,\r\n          gl.UNSIGNED_BYTE,\r\n          textureImage\r\n        );\r\n\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n      };\r\n\r\n      textureImage.src = src;\r\n    }\r\n\r\n    update() {\r\n      const gl = this.gl;\r\n\r\n      const now = performance.now();\r\n      const elapsed = (now - this.time.start) / 5000;\r\n      const delta = now - this.time.old;\r\n      this.time.old = now;\r\n\r\n      this.uniforms.time = elapsed;\r\n\r\n      if (this.count > 0) {\r\n        gl.clear(gl.COLORBUFFERBIT);\r\n        gl.drawArrays(gl.POINTS, 0, this.count);\r\n      }\r\n\r\n      this.onUpdate(delta);\r\n\r\n      requestAnimationFrame(this.update);\r\n    }\r\n  }\r\n\r\n  const pointSize = 2.5;\r\n\r\n  const waves = new ShaderProgram(document.querySelector(\".waves\"), {\r\n    texture:\r\n      \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAb1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8v0wLRAAAAJHRSTlMAC/goGvDhmwcExrVjWzrm29TRqqSKenRXVklANSIUE8mRkGpv+HOfAAABCElEQVQ4y4VT13LDMAwLrUHteO+R9f/fWMfO6dLaPeKVEECRxOULWsEGpS9nULDwia2Y+ALqUNbAWeg775zv+sA4/FFRMxt8U2FZFCVWjR/YrH4/H9sarclSKdPMWKzb8VsEeHB3m0shkhVCyNzeXeAQ9Xl4opEieX2QCGnwGbj6GMyjw9t1K0fK9YZunPXeAGsfJtYjwzxaBnozGGorYz0ypK2HzQSYx1y8DgSRo2ewOiyh2QWOEk1Y9OrQV0a8TiBM1a8eMHWYnRMy7CZ4t1CmyRkhSUvP3gRXyHOCLBxNoC3IJv//ZrJ/kxxUHPUB+6jJZZHrpg6GOjnqaOmzp4NDR48OLxn/H27SRQ08S0ZJAAAAAElFTkSuQmCC\",\r\n    uniforms: {\r\n      size: { type: \"float\", value: pointSize },\r\n      field: { type: \"vec3\", value: [0, 0, 0] },\r\n      speed: { type: \"float\", value: 5 },\r\n    },\r\n    vertex: `\r\n              #define M_PI 3.1415926535897932384626433832795\r\n          \r\n              precision highp float;\r\n          \r\n              attribute vec4 a_position;\r\n              attribute vec4 a_color;\r\n          \r\n              uniform float u_time;\r\n              uniform float u_size;\r\n              uniform float u_speed;\r\n              uniform vec3 u_field;\r\n              uniform mat4 u_projection;\r\n          \r\n              varying vec4 v_color;\r\n          \r\n              void main() {\r\n          \r\n                vec3 pos = a_position.xyz;\r\n          \r\n                pos.y += (\r\n                  cos(pos.x / u_field.x * M_PI * 8.0 + u_time * u_speed) +\r\n                  sin(pos.z / u_field.z * M_PI * 8.0 + u_time * u_speed)\r\n                ) * u_field.y;\r\n          \r\n                gl_Position = u_projection * vec4( pos.xyz, a_position.w );\r\n                gl_PointSize = ( u_size / gl_Position.w ) * 100.0;\r\n          \r\n                v_color = a_color;\r\n          \r\n              }`,\r\n    fragment: `\r\n              precision highp float;\r\n          \r\n              uniform sampler2D u_texture;\r\n          \r\n              varying vec4 v_color;\r\n          \r\n              void main() {\r\n          \r\n                gl_FragColor = v_color * texture2D(u_texture, gl_PointCoord);\r\n          \r\n              }`,\r\n    onResize(w, h, dpi) {\r\n      const position = [],\r\n        color = [];\r\n\r\n      const width = 400 * (w / h);\r\n      const depth = 400;\r\n      const height = 3;\r\n      const distance = 5;\r\n\r\n      for (let x = 0; x < width; x += distance) {\r\n        for (let z = 0; z < depth; z += distance) {\r\n          position.push(-width / 2 + x, -30, -depth / 2 + z);\r\n          color.push(\r\n            0,\r\n            1 - (x / width) * 1,\r\n            0.5 + (x / width) * 0.5,\r\n            z / depth\r\n          );\r\n        }\r\n      }\r\n\r\n      this.uniforms.field = [width, height, depth];\r\n\r\n      this.buffers.position = position;\r\n      this.buffers.color = color;\r\n\r\n      this.uniforms.size = (h / 400) * pointSize * dpi;\r\n    },\r\n  });\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}